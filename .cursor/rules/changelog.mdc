---
description: Changelog and release notes rules
globs: ["CHANGELOG.md", ".github/**/*"]
---

# Changelog Rules

## Automatic Generation

CHANGELOG.md is automatically generated by semantic-release based on commit messages.

## How It Works

1. Commits to `main` trigger release workflow
2. semantic-release analyzes commit messages
3. Version is determined by commit types
4. CHANGELOG.md is updated automatically
5. npm package is published
6. GitHub release is created

## Commit Message Impact

| Commit Type | Version Bump | Changelog Section |
|-------------|--------------|-------------------|
| `feat:` | Minor (0.x.0) | Features |
| `fix:` | Patch (0.0.x) | Bug Fixes |
| `perf:` | Patch (0.0.x) | Performance |
| `BREAKING CHANGE` | Major (x.0.0) | Breaking Changes |
| `docs:` | None | Not included |
| `style:` | None | Not included |
| `refactor:` | None | Not included |
| `test:` | None | Not included |
| `chore:` | None | Not included |

## Writing Good Commit Messages

For meaningful changelog entries:

```bash
# Good - describes user-facing change
feat: add restore command for backup recovery
fix: prevent data loss when sync fails mid-operation

# Bad - too vague
feat: add new feature
fix: fix bug
```

## Breaking Changes

Mark breaking changes clearly:

```bash
feat!: redesign configuration file format

BREAKING CHANGE: The config.json format has changed.
Users must migrate their configuration files using
the new 'tuck config migrate' command.
```

## Manual Changelog Edits

NEVER manually edit CHANGELOG.md:
- It will be overwritten by semantic-release
- Use commit messages to control content
- Use conventional commits format

## Release Notes

GitHub releases are created automatically with:
- Version number from package.json
- Changelog entries for this version
- Links to commits and PRs
- Binary artifacts attached

## Changelog Format

The generated changelog follows Keep a Changelog format:

```markdown
# Changelog

## [1.2.0] - 2024-01-15

### Features

* add restore command for backup recovery (abc1234)

### Bug Fixes

* prevent data loss when sync fails (def5678)
```
